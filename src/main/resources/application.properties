spring.application.name=pokerplanning-server

# --- DataSource ---
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/pokerplanning}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASS:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA ---
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# --- Flyway ---
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# --- Redis ---
# REDIS_URL takes priority (Render/cloud). Falls back to host+port (Docker local).
spring.data.redis.url=${REDIS_URL:redis://${REDIS_HOST:localhost}:${REDIS_PORT:6379}}

# --- Security: JWT for user accounts ---
app.jwt.secret=${JWT_SECRET:changeme-jwt-secret-at-least-32-chars-long!!}
app.jwt.expiration-ms=86400000

# --- Security: Guest token ---
app.guest-token.secret=${GUEST_TOKEN_SECRET:changeme-guest-token-secret-32-chars!!}
app.guest-token.expiration-ms=86400000

# --- CORS ---
app.cors.allowed-origins=${CORS_ORIGINS:http://localhost:5173,http://localhost:3000}

# --- WebSocket ---
app.websocket.allowed-origins=${WS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000}

# --- SpringDoc / Swagger UI ---
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.persist-authorization=true

# --- Logging ---
logging.level.com.paula.pokerplanning_server=DEBUG
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
